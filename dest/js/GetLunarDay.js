function GetLeapMonth(a){var b=LunarLeapYear[a-2001>>1];return 0==(a-2001&1)?b>>4:15&b}function LunarMonthDays(a,b){var c,d,e;return c=0,d=29,e=16-b,b>GetLeapMonth(a)&&GetLeapMonth(a)>0&&e--,(LunarDaysOfMonth[a-2001]&1<<e)>0&&d++,b==GetLeapMonth(a)&&(c=(LunarDaysOfMonth[a-2001]&1<<e-1)>0?30:29),d+(c<<16)}function LunarYearDays(a){var b,c;b=0;for(var d=1;d<=12;d++)c=LunarMonthDays(a,d),b+=c>>16&65535,b+=65535&c;return b}function FormatLunarYear(a){var b,c=new String("甲乙丙丁戊己庚辛壬癸"),d=new String("子丑寅卯辰巳午未申酉戌亥");return b=c.substr((a-4)%10,1),b+=d.substr((a-4)%12,1),b+"年"}function FormatLunarMonth(a){var b,c=new String("正二三四五六七八九十");return b=a<=10?c.substr(a-1,1):11==a?"十一":"十二",b+"月"}function FormatLunarDay(a){var b,c=new String("初十廿三"),d=new String("一二三四五六七八九十");return b=20!=a&&30!=a?c.substr((a-1)/10,1)+d.substr((a-1)%10,1):20!=a?c.substr(a/10,1)+"十":"二十"}function GetLunarDateString(a){var b,c,d,e,f=!1,g=6e4,h=60*g,i=24*h,j=Math.round(a.getTime()/i)-11323;if(j<23)iYear=2e3,d=12,e=j+7;else{for(j-=23,c=2001,d=1,e=1,b=LunarYearDays(c);j>=b;)j-=b,c++,b=LunarYearDays(c);for(b=65535&LunarMonthDays(c,d);j>=b;){if(j-=b,d==GetLeapMonth(c)){if(b=LunarMonthDays(c,d)>>16,j<b){f=b>0;break}j-=b}d++,b=65535&LunarMonthDays(c,d)}e+=j}return FormatLunarDay(e)}var LunarDaysOfMonth=new Array(54440,54432,55888,23208,22176,43736,9680,37584,51544,43344,46240,46416,46416,21928,19360,42416,21176,21168,43312,29864,27296,44368,19880,19296,38256,42208,53856,59696,54576,23200,27472,38608,19176,19152,42192,53848,53840,54560,55968,46496,22224,19160,18864,42168,42160,43600,46376,27936,44448,21936),LunarLeapYear=new Array(64,2,7,0,80,4,9,0,96,4,0,32,96,5,0,48,176,6,0,80,2,7,0,80,3);